<!DOCTYPE html>
<html ng-app>
<!--
Test page during development.
-->
<head>
    <title>MobileToys</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>

    <link rel="stylesheet" href="lib/jquery.mobile.css"/>

    <script src="lib/jquery.js"></script>
    <script src="lib/jquery.mobile.js"></script>
    <script src="lib/angular.js"></script>
    <script src="jqm-angular.jsp"></script>

    <script>
        function TestController($scope) {
            $scope.ItemCollection = [{ID:1, Name:"Entry1"}, {ID:2, Name:"Entry2"}];
            $scope.IDItemEditable = null;

            $scope.SetEditable = function(id) {
                $scope.IDItemEditable = id;
            };

            $scope.SaveEdit = function(item) {
                //Do something and leave edit mode
                $scope.IDItemEditable = null;
            };
        }
    </script>
</head>
<body>

<div data-role="page" id="jur" ng:controller="TestController">
    <div data-role="content" data-theme="d">

        <ul id="grid" data-role="listview" data-inset="false">
            <li data-theme="a">
                <a href="#">Lights & Devices Details</a>
                <a style="display:none" href="#"></a>
            </li>

            <li data-theme="c" ng:repeat="item in ItemCollection">
                <a href="#" ngm-if="item.ID != IDItemEditable" ngm-click="SetEditable(item.ID)">
                    <h3>{{item.Name}}</h3>
                </a>
                <a href="#" data-theme="c" data-icon="delete" ngm-if="item.ID != IDItemEditable"></a>

                <a href="#" ngm-if="item.ID == IDItemEditable">
                    <div data-role="fieldcontain">
                        <label>Name</label>
                        <input type="text" ng-model="item.Name" />
                    </div>

                </a>
                <a href="#" data-theme="c" data-icon="check"
                   ngm-click="SaveEdit(item)"
                   ngm-if="item.ID == IDItemEditable">save</a>
            </li>
        </ul>


    </div>
</div>

</body>

</html>