<!DOCTYPE html>
<html>
<!--
Test page during development.
-->
<head>
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
    <link rel="stylesheet" href="../lib/jquery.mobile.css"/>

    <script src="../lib/jquery.js"></script>
    <script src="../lib/jquery.mobile.js"></script>
    <script src="../lib/angular.js"></script>

    <script src="../compiled/jquery-mobile-angular-adapter.js"></script>
    <style>
.map {
    width: 400px;
    height: 375px;
    border: 1px solid #777777;
}
</style>
<script src="https://raw.github.com/angular-ui/angular-ui/master/build/angular-ui.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
</style>

<script>
var app = angular.module("app", ['ui']);

app.controller("MapCtrl",function ($scope) {    
    $scope.myMarkers = [];
    $scope.addMarker = function($event) {
      $scope.myMarkers.push(new google.maps.Marker({
        map: $scope.myMap,
        position: $event.latLng
      }));
    };
    
 
    $scope.mapOptions = {
      center: new google.maps.LatLng(46.227638, 2.213749),
      zoom: 5,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
     
    $scope.openMarkerInfo = function(marker) {
      $scope.myInfoWindow.open($scope.myMap, marker);
    };
    
    
    
});
</script>

</head>
<body ng-app="app">
<div id="main" data-role="page" ng-controller="MapCtrl">
    <div data-role="content">
        
        <div ng-repeat="marker in myMarkers" ui-map-marker="myMarkers[$index]"
              ui-event="{'map-click': 'openMarkerInfo(marker)'}">
        </div>
        
        <div ui-map-info-window="myInfoWindow">Hello gentleman !</div>
        
        <div id="map_canvas" ui-map="myMap" class="map"
        ui-options="mapOptions" ui-event="{'map-click': 'addMarker($event)'}"></div>    
        
    </div>
</div>


</body>
</html>